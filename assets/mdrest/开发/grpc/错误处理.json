{"date":"2018-01-30T00:00:00Z","html":"\u003cp\u003e网址： \u003ca href=\"https://github.com/googleapis/googleapis/tree/master/google/rpc\"\u003ehttps://github.com/googleapis/googleapis/tree/master/google/rpc\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eGoogle 错误定义适用于大多数互联网公司的错误处理， Google 的错误处理简而言有如下处理：\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e如果请求返回成功，则HTTP状态码：200， 并返回请求实体\u003c/li\u003e\n\u003cli\u003e如果请求失败：则返回非200，并返回：error 表示错误内容\u003c/li\u003e\n\u003cli\u003e如果返回错误需要进一步处理，则返回：error detail 表示具体处理方式\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e这种方式通过很简洁的方式定义了错误处理机制， 该错误码的定义，支持GRPC错误到HTTP错误的转换逻辑， 遵循HTTP网关协议规范，常见错误如下：\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e请求中有字段不符合要求，返回 400\u003c/li\u003e\n\u003cli\u003e权限不足， 返回 403\u003c/li\u003e\n\u003cli\u003e查询数据库，空指针等内部错误 返回：500\u003c/li\u003e\n\u003cli\u003e先决条件不足，返回 412\u003c/li\u003e\n\u003cli\u003e插入数据时和之前数据有冲突，返回 409\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"grpc错误码表定义\"\u003eGRPC错误码表定义\u003c/h2\u003e\n\n\u003cp\u003eGoogle错误码定义方式将原本复杂递增的错误方式，抽象为16种错误内容，也就是说， 无论复杂的业务场景，错误码也是 0 ～16，这样做会大大减少我们查阅文档的频率。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"left\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"left\"\u003eHTTP宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e0\u003c/td\u003e\n\u003ctd align=\"left\"\u003eOK\u003c/td\u003e\n\u003ctd align=\"center\"\u003e200\u003c/td\u003e\n\u003ctd align=\"left\"\u003eOK\u003c/td\u003e\n\u003ctd\u003e无错误\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e1\u003c/td\u003e\n\u003ctd align=\"left\"\u003eCanceled\u003c/td\u003e\n\u003ctd align=\"center\"\u003e408\u003c/td\u003e\n\u003ctd align=\"left\"\u003eRequestTimeout\u003c/td\u003e\n\u003ctd\u003e请求取消\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e2\u003c/td\u003e\n\u003ctd align=\"left\"\u003eUnknown\u003c/td\u003e\n\u003ctd align=\"center\"\u003e500\u003c/td\u003e\n\u003ctd align=\"left\"\u003eInternalServerError\u003c/td\u003e\n\u003ctd\u003e未知错误\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e3\u003c/td\u003e\n\u003ctd align=\"left\"\u003eInvalidArgument\u003c/td\u003e\n\u003ctd align=\"center\"\u003e400\u003c/td\u003e\n\u003ctd align=\"left\"\u003eBadRequest\u003c/td\u003e\n\u003ctd\u003e参数错误\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e4\u003c/td\u003e\n\u003ctd align=\"left\"\u003eDeadlineExceeded\u003c/td\u003e\n\u003ctd align=\"center\"\u003e408\u003c/td\u003e\n\u003ctd align=\"left\"\u003eRequestTimeout\u003c/td\u003e\n\u003ctd\u003e请求过期\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e5\u003c/td\u003e\n\u003ctd align=\"left\"\u003eNotFound\u003c/td\u003e\n\u003ctd align=\"center\"\u003e404\u003c/td\u003e\n\u003ctd align=\"left\"\u003eNotFound\u003c/td\u003e\n\u003ctd\u003e资源未找到\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e6\u003c/td\u003e\n\u003ctd align=\"left\"\u003eAlreadyExists\u003c/td\u003e\n\u003ctd align=\"center\"\u003e409\u003c/td\u003e\n\u003ctd align=\"left\"\u003eConflict\u003c/td\u003e\n\u003ctd\u003e插入ID或其他内容已存在\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e7\u003c/td\u003e\n\u003ctd align=\"left\"\u003ePermissionDenied\u003c/td\u003e\n\u003ctd align=\"center\"\u003e403\u003c/td\u003e\n\u003ctd align=\"left\"\u003eForbidden\u003c/td\u003e\n\u003ctd\u003e没有权限\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e16\u003c/td\u003e\n\u003ctd align=\"left\"\u003eUnauthenticated\u003c/td\u003e\n\u003ctd align=\"center\"\u003e401\u003c/td\u003e\n\u003ctd align=\"left\"\u003eUnauthorized\u003c/td\u003e\n\u003ctd\u003e用户未鉴权（鉴权网关保留，业务层不能使用）\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e8\u003c/td\u003e\n\u003ctd align=\"left\"\u003eResourceExhausted\u003c/td\u003e\n\u003ctd align=\"center\"\u003e429\u003c/td\u003e\n\u003ctd align=\"left\"\u003eStatusTooManyRequests\u003c/td\u003e\n\u003ctd\u003e资源用尽  请求过于频繁\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e9\u003c/td\u003e\n\u003ctd align=\"left\"\u003eFailedPrecondition\u003c/td\u003e\n\u003ctd align=\"center\"\u003e412\u003c/td\u003e\n\u003ctd align=\"left\"\u003ePreconditionFailed\u003c/td\u003e\n\u003ctd\u003e先决条件失败失败\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e10\u003c/td\u003e\n\u003ctd align=\"left\"\u003eAborted\u003c/td\u003e\n\u003ctd align=\"center\"\u003e409\u003c/td\u003e\n\u003ctd align=\"left\"\u003eConflict\u003c/td\u003e\n\u003ctd\u003e请求终止，事务异常导致\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e11\u003c/td\u003e\n\u003ctd align=\"left\"\u003eOutOfRange\u003c/td\u003e\n\u003ctd align=\"center\"\u003e400\u003c/td\u003e\n\u003ctd align=\"left\"\u003eBadRequest\u003c/td\u003e\n\u003ctd\u003e请求超出总长度\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e12\u003c/td\u003e\n\u003ctd align=\"left\"\u003eUnimplemented\u003c/td\u003e\n\u003ctd align=\"center\"\u003e501\u003c/td\u003e\n\u003ctd align=\"left\"\u003eNotImplemented\u003c/td\u003e\n\u003ctd\u003e服务不支持或未实现\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e13\u003c/td\u003e\n\u003ctd align=\"left\"\u003eInternal\u003c/td\u003e\n\u003ctd align=\"center\"\u003e500\u003c/td\u003e\n\u003ctd align=\"left\"\u003eInternalServerError\u003c/td\u003e\n\u003ctd\u003e服务器内部错误\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e14\u003c/td\u003e\n\u003ctd align=\"left\"\u003eUnavailable\u003c/td\u003e\n\u003ctd align=\"center\"\u003e503\u003c/td\u003e\n\u003ctd align=\"left\"\u003eServiceUnavailable\u003c/td\u003e\n\u003ctd\u003e服务不可用 （网关保留，业务层不能使用）\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e15\u003c/td\u003e\n\u003ctd align=\"left\"\u003eDataLoss\u003c/td\u003e\n\u003ctd align=\"center\"\u003e500\u003c/td\u003e\n\u003ctd align=\"left\"\u003eInternalServerError\u003c/td\u003e\n\u003ctd\u003e不可恢复的数据丢失或损坏\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch2 id=\"grpc-错误码使用举例\"\u003eGRPC 错误码使用举例\u003c/h2\u003e\n\n\u003cp\u003e对于简单的错误，我们直接返回下面的错误码即可：\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;参数XXX错误\u0026quot;,\n  \u0026quot;code\u0026quot;: 3\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003e但是，对于复杂的错误逻辑，例如：表单提交返回哪些字段错误，账户被锁定，返回DEBUG调试信息用于定位问题等，则需要通过详细的规范输出错误详情，就几点错误详情举例，整理如下：\u003c/p\u003e\n\n\u003cp\u003e错误详情示例：\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e参数错误： 请求中有字段不符合要求\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e3\u003c/td\u003e\n\u003ctd align=\"center\"\u003eInvalidArgument\u003c/td\u003e\n\u003ctd align=\"center\"\u003e400\u003c/td\u003e\n\u003ctd align=\"center\"\u003eBadRequest\u003c/td\u003e\n\u003ctd\u003e参数错误\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;INVALID_ARGUMENT\u0026quot;,\n  \u0026quot;code\u0026quot;: 3,\n  \u0026quot;details\u0026quot;: [\n    {\n      \u0026quot;field_violations\u0026quot;: [\n        {\n          \u0026quot;field\u0026quot;: \u0026quot;name\u0026quot;,\n          \u0026quot;description\u0026quot;: \u0026quot;姓名不为空\u0026quot;\n        },\n        {\n          \u0026quot;field\u0026quot;: \u0026quot;sex\u0026quot;,\n          \u0026quot;description\u0026quot;: \u0026quot;性别必须为男/女\u0026quot;\n        }\n      ]\n    }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cul\u003e\n\u003cli\u003e账户被锁定：60秒, 请于60秒后重试\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e7\u003c/td\u003e\n\u003ctd align=\"center\"\u003ePermissionDenied\u003c/td\u003e\n\u003ctd align=\"center\"\u003e403\u003c/td\u003e\n\u003ctd align=\"center\"\u003eForbidden\u003c/td\u003e\n\u003ctd\u003e权限不足\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;PERMISSION_DENIED\u0026quot;,\n  \u0026quot;code\u0026quot;: 7,\n  \u0026quot;details\u0026quot;: [\n    {\n      \u0026quot;retry_delay\u0026quot;: {\n        \u0026quot;seconds\u0026quot;: 60\n      }\n    }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cul\u003e\n\u003cli\u003e服务器内部错误，请稍后重试\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e13\u003c/td\u003e\n\u003ctd align=\"center\"\u003eInternal\u003c/td\u003e\n\u003ctd align=\"center\"\u003e500\u003c/td\u003e\n\u003ctd align=\"center\"\u003eInternalServerError\u003c/td\u003e\n\u003ctd\u003e服务器内部错误\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;INTERNAL\u0026quot;,\n  \u0026quot;code\u0026quot;: 12,\n  \u0026quot;details\u0026quot;: [\n    {\n      \u0026quot;detail\u0026quot;: \u0026quot;data base check error\u0026quot;,\n      \u0026quot;stack_entries\u0026quot;: [\n        \u0026quot;select * form user where uid = %d\u0026quot;,\n        \u0026quot;111\u0026quot;,\n        \u0026quot;error\u0026quot;,\n        \u0026quot;dial 192.168.1.1 connection refused\u0026quot;\n      ]\n    }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cul\u003e\n\u003cli\u003e用户没有同意相关条款\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e9\u003c/td\u003e\n\u003ctd align=\"center\"\u003eFailedPrecondition\u003c/td\u003e\n\u003ctd align=\"center\"\u003e412\u003c/td\u003e\n\u003ctd align=\"center\"\u003ePreconditionFailed\u003c/td\u003e\n\u003ctd\u003e先决条件失败失败\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;FAILED_PRECONDITION\u0026quot;,\n  \u0026quot;code\u0026quot;: 9,\n  \u0026quot;details\u0026quot;: [\n    {\n      \u0026quot;violations\u0026quot;: [\n        {\n          \u0026quot;type\u0026quot;: \u0026quot;TOS\u0026quot;,\n          \u0026quot;subject\u0026quot;: \u0026quot;google.com/cloud\u0026quot;,\n          \u0026quot;description\u0026quot;: \u0026quot;Terms of service not accepted\u0026quot;\n        }\n      ]\n    }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cul\u003e\n\u003cli\u003e插入用户时，返回用户冲突，并返回冲突用户的ID\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e6\u003c/td\u003e\n\u003ctd align=\"center\"\u003eAlreadyExists\u003c/td\u003e\n\u003ctd align=\"center\"\u003e409\u003c/td\u003e\n\u003ctd align=\"center\"\u003eConflict\u003c/td\u003e\n\u003ctd\u003e插入ID或其他内容已存在\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;ALREADY_EXISTS\u0026quot;,\n  \u0026quot;code\u0026quot;: 6,\n  \u0026quot;details\u0026quot;: [\n    {\n      \u0026quot;request_id\u0026quot;: \u0026quot;uid-12312434\u0026quot;,\n      \u0026quot;serving_data\u0026quot;: \u0026quot;{\\\u0026quot;name\\\u0026quot;:\\\u0026quot;haha\\\u0026quot;}\u0026quot;\n    }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cul\u003e\n\u003cli\u003eA用户访问B用户家庭信息，如果无法访问，返回B用户的 email\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e7\u003c/td\u003e\n\u003ctd align=\"center\"\u003ePermissionDenied\u003c/td\u003e\n\u003ctd align=\"center\"\u003e403\u003c/td\u003e\n\u003ctd align=\"center\"\u003eForbidden\u003c/td\u003e\n\u003ctd\u003e权限不足\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;PERMISSION_DENIED\u0026quot;,\n  \u0026quot;code\u0026quot;: 7,\n  \u0026quot;details\u0026quot;: [\n    {\n      \u0026quot;resource_type\u0026quot;: \u0026quot;book\u0026quot;,\n      \u0026quot;resource_name\u0026quot;: \u0026quot;projects/1234/books/5678\u0026quot;,\n      \u0026quot;owner\u0026quot;: \u0026quot;user:leenanxi@gmail.com\u0026quot;\n    },\n    {\n      \u0026quot;resource_type\u0026quot;: \u0026quot;ype.googleapis.com/google.pubsub.v1.Topic\u0026quot;,\n      \u0026quot;resource_name\u0026quot;: \u0026quot;example.com_4fghdhgsrgh@group.calendar.google.com\u0026quot;,\n      \u0026quot;owner\u0026quot;: \u0026quot;project:gcm\u0026quot;\n    }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cul\u003e\n\u003cli\u003e访问接口时，如果出现400，或401， 如有必要，给予一定的帮助提示\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e16\u003c/td\u003e\n\u003ctd align=\"center\"\u003eUnauthenticated\u003c/td\u003e\n\u003ctd align=\"center\"\u003e401\u003c/td\u003e\n\u003ctd align=\"center\"\u003eUnauthorized\u003c/td\u003e\n\u003ctd\u003e用户未鉴权\u003c/td\u003e\n\u003c/tr\u003e\n\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e3\u003c/td\u003e\n\u003ctd align=\"center\"\u003eInvalidArgument\u003c/td\u003e\n\u003ctd align=\"center\"\u003e400\u003c/td\u003e\n\u003ctd align=\"center\"\u003eBadRequest\u003c/td\u003e\n\u003ctd\u003e参数错误\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;UNAUTHENTICATED\u0026quot;,\n  \u0026quot;code\u0026quot;: 16,\n  \u0026quot;details\u0026quot;: [\n    {\n      \u0026quot;links\u0026quot;: [\n        {\n          \u0026quot;description\u0026quot;: \u0026quot;Requires authentication\u0026quot;,\n          \u0026quot;url\u0026quot;: \u0026quot;https://developer.github.com/v3/orgs/#get-an-organization\u0026quot;\n        },\n        {\n          \u0026quot;description\u0026quot;: \u0026quot;Github Organization Documentation\u0026quot;,\n          \u0026quot;url\u0026quot;: \u0026quot;https://developer.github.com/v3/orgs/#get-an-organization\u0026quot;\n        }\n      ]\n    },\n    {\n      \u0026quot;field_violations\u0026quot;: [\n        {\n          \u0026quot;field\u0026quot;: \u0026quot;name\u0026quot;,\n          \u0026quot;description\u0026quot;: \u0026quot;姓名不为空\u0026quot;\n        },\n        {\n          \u0026quot;field\u0026quot;: \u0026quot;sex\u0026quot;,\n          \u0026quot;description\u0026quot;: \u0026quot;性别必须大于为男/女\u0026quot;\n        }\n      ]\n    }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cul\u003e\n\u003cli\u003e国际化：对于一些简单的接口，直接在接口层对返回的错误进行国际化, 例如：账户锁定，请于60秒后重试的接口。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003e错误码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth align=\"center\"\u003e状态码\u003c/th\u003e\n\u003cth align=\"center\"\u003e宏\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e7\u003c/td\u003e\n\u003ctd align=\"center\"\u003ePermissionDenied\u003c/td\u003e\n\u003ctd align=\"center\"\u003e403\u003c/td\u003e\n\u003ctd align=\"center\"\u003eForbidden\u003c/td\u003e\n\u003ctd\u003e权限不足\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \u0026quot;error\u0026quot;: \u0026quot;PERMISSION_DENIED\u0026quot;,\n  \u0026quot;code\u0026quot;: 7,\n  \u0026quot;details\u0026quot;: [\n    {\n      \u0026quot;retry_delay\u0026quot;: {\n        \u0026quot;seconds\u0026quot;: 60\n      }\n    },\n    {\n      \u0026quot;locale\u0026quot;: \u0026quot;en\u0026quot;,\n      \u0026quot;message\u0026quot;: \u0026quot;account is locked, please retry in {retry_delay.seconds | format : 'time'} \u0026quot;\n    },\n    {\n      \u0026quot;locale\u0026quot;: \u0026quot;zh\u0026quot;,\n      \u0026quot;message\u0026quot;: \u0026quot;账户已被锁定，请于 {retry_delay.seconds  | format : 'hh'} 小时后重试\u0026quot;\n    }\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e模型定义地址：\u003c/p\u003e\n\n\u003cp\u003egoogle/rpc/code.proto\u003c/p\u003e\n\n\u003cp\u003egoogle/rpc/error_details.proto\u003c/p\u003e\n\n\u003cp\u003egoogle/rpc/status.proto\u003c/p\u003e\n\u003c/blockquote\u003e\n","location":"开发/grpc/错误处理","picture":"/开发/grpc/img/grpc_error.png","tags":["grpc","proto"],"title":"GRPC通用错误码和错误详情详解"}